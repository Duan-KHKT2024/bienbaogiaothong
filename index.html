/**
 * Hàm đóng modal hướng dẫn
 */
function closeInstructionModal() {
    const instructionModal = document.getElementById('instructionModal');
    instructionModal.style.display = 'none';
    instructionModal.setAttribute('aria-hidden', 'true');
    window.speechSynthesis.cancel(); // Dừng đọc hướng dẫn khi đóng modal
}

/**
 * Hàm đọc văn bản bằng giọng nói
 * @param {string} text - Văn bản cần đọc
 */
function speakText(text) {
    if (!('speechSynthesis' in window)) {
        console.warn('Trình duyệt của bạn không hỗ trợ Speech Synthesis.');
        return;
    }

    const synth = window.speechSynthesis;
    synth.cancel(); // Dừng bất kỳ giọng nói nào đang phát
    if (text.trim() === "") return; // Không đọc nếu không có văn bản

    const utterThis = new SpeechSynthesisUtterance(text);
    const voices = synth.getVoices();
    const vietnameseVoices = voices.filter(voice => voice.lang.startsWith('vi'));

    if (vietnameseVoices.length > 0) {
        utterThis.voice = vietnameseVoices[0];
    }

    synth.speak(utterThis);
}
