<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ứng dụng Nhận Diện Biển Báo Giao Thông</title>
    <!-- Thêm Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Open+Sans:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* CSS Variables và các kiểu CSS khác giữ nguyên */
        :root {
            --primary-color: #28a745;
            --secondary-color: #007bff;
            --accent-color: #17a2b8;
            --warning-color: #ffc107;
            --purple-color: #6f42c1;
            --dark-color: #333;
            --light-bg: #f0f4f8;
            --white-bg: #fff;
            --text-color: #654321;
            --error-color: #d9534f;
            --disabled-color: #cccccc;
            --focus-outline: #ffbf47;
            --accordion-bg: #e9ecef;
            --accordion-hover: #dee2e6;
            --accordion-active: #ced4da;
            --qa-question-font: 'Roboto', sans-serif;
            --qa-answer-font: 'Open Sans', sans-serif;
            --question-color: #654321;
            --slogan-font: 'Roboto', sans-serif;
            --slogan-color: #ffffff;
            --slogan-bg-color: var(--footer-bg-color);
            --slogan-padding: 20px;
            --slogan-border-radius: 15px;
            --slogan-font-size: 1.2em;
            --slogan-transition: opacity 1s ease-in-out;
            --footer-bg-color: #007bff;
            --footer-text-color: #ffffff;
            --modal-bg-color: rgba(0, 0, 0, 0.6);
            --modal-content-bg: #ffffff;
            --modal-content-border: #28a745;
            --modal-padding: 30px;
            --modal-border-radius: 10px;
            --modal-title-color: var(--primary-color);
            --modal-text-color: #333;
            --learning-bg-color: #f8f9fa;
            --card-bg-color: #ffffff;
            --card-border-color: #dee2e6;
            --card-hover-bg: #e9ecef;
            --card-hover-transform: translateY(-5px);
            --card-transition: transform 0.3s ease, background-color 0.3s ease;
            --section-title-bg: #007bff;
            --section-title-color: #ffffff;
            --section-title-padding: 10px 20px;
            --section-title-border-radius: 8px 8px 0 0;
            --fixed-slogan-width: 100%;
            --fixed-slogan-height: 80px;
        }

        /* Reset CSS */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--qa-question-font);
            background-color: var(--light-bg);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 100px 20px 20px 20px;
            min-height: 100vh;
        }

        /* Phần Tiêu Đề Các Phần */
        .section-title {
            width: 100%;
            max-width: 800px;
            background-color: var(--section-title-bg);
            color: var(--section-title-color);
            padding: var(--section-title-padding);
            border-radius: var(--section-title-border-radius);
            margin-bottom: 10px;
            text-align: center;
            font-size: 1.1em;
            font-family: var(--qa-question-font);
            font-weight: normal;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        /* Phần 1: Khẩu Hiệu */
        .slogan-section {
            position: fixed;
            top: 0;
            left: 0;
            width: var(--fixed-slogan-width);
            height: var(--fixed-slogan-height);
            background: var(--slogan-bg-color);
            padding: var(--slogan-padding);
            border-radius: 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            transition: width 0.3s ease;
            z-index: 1000;
        }

        #slogan {
            font-family: var(--slogan-font);
            font-size: var(--slogan-font-size);
            color: var(--slogan-color);
            opacity: 0;
            transition: var(--slogan-transition);
            text-align: center;
            word-wrap: break-word;
            font-weight: normal;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .slogan-section.active #slogan {
            opacity: 1;
        }

        /* Phần mới: Carousel biển báo */
        .carousel-section {
            width: 100%;
            overflow: hidden;
            background-color: var(--light-bg);
            padding: 10px 0;
            margin-bottom: 30px;
        }

        .carousel-track {
            display: flex;
            width: calc(150px * 10);
            animation: scroll 20s linear infinite;
        }

        .carousel-track img {
            width: 150px;
            height: auto;
            margin-right: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            flex-shrink: 0;
        }

        @keyframes scroll {
            0% {
                transform: translateX(0);
            }
            100% {
                transform: translateX(-50%);
            }
        }

        /* Responsive adjustments for carousel */
        @media (max-width: 600px) {
            .carousel-track img {
                width: 100px;
                margin-right: 10px;
            }

            .carousel-track {
                width: calc(100px * 10);
                animation: scroll 15s linear infinite;
            }
        }

        /* Phần 2: Nhận Diện Biển Báo Giao Thông */
        .recognition-section {
            width: 100%;
            max-width: 800px;
            background-color: var(--white-bg);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            margin-bottom: 30px;
        }

        .recognition-section h2 {
            color: var(--section-title-color);
            margin-bottom: 20px;
            font-size: 1.1em;
            text-align: center;
            font-family: var(--qa-question-font);
            font-weight: normal;
        }

        .video-container {
            position: relative;
            width: 100%;
            max-width: 600px;
        }

        /* Placeholder Image Styles */
        #placeholderImage {
            width: 100%;
            max-width: 600px;
            height: auto;
            border: 4px solid var(--primary-color);
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            object-fit: cover;
            display: block;
        }

        /* Video Styles */
        #video, #capturedImage {
            border: 4px solid var(--primary-color);
            border-radius: 15px;
            width: 100%;
            max-width: 600px;
            height: auto;
            max-height: 400px;
            margin-bottom: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: opacity 0.5s ease, transform 0.3s ease;
            object-fit: cover;
        }

        #video {
            display: none;
        }

        #capturedImage {
            display: none;
            opacity: 0;
        }

        /* Cải thiện thiết kế Overlay */
        .overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 60%;
            height: 60%;
            transform: translate(-50%, -50%);
            border: 3px solid rgba(40, 167, 69, 0.8);
            border-radius: 20px;
            box-sizing: border-box;
            pointer-events: none;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            display: none;
        }

        /* Rest of your existing CSS for buttons, prediction results, QA, modals, footer, etc. */
        /* ... (giữ nguyên các phần CSS khác) ... */
    </style>
</head>
<body>

    <!-- Phần 1: Khẩu Hiệu Tham Gia Giao Thông -->
    <div class="slogan-section active">
        <p id="slogan">Đi bộ trên vỉa hè - An toàn cho bạn và mọi người!</p>
    </div>

    <!-- Phần mới: Carousel biển báo -->
    <div class="carousel-section">
        <div class="carousel-track">
            <!-- Sử dụng hình ảnh từ thư mục hinh -->
            <img src="hinh/1.jpg" alt="Biển báo 1">
            <img src="hinh/2.jpg" alt="Biển báo 2">
            <img src="hinh/3.jpg" alt="Biển báo 3">
            <img src="hinh/4.jpg" alt="Biển báo 4">
            <img src="hinh/5.jpg" alt="Biển báo 5">
            <!-- Lặp lại các hình ảnh để tạo hiệu ứng trượt mượt -->
            <img src="hinh/1.jpg" alt="Biển báo 1">
            <img src="hinh/2.jpg" alt="Biển báo 2">
            <img src="hinh/3.jpg" alt="Biển báo 3">
            <img src="hinh/4.jpg" alt="Biển báo 4">
            <img src="hinh/5.jpg" alt="Biển báo 5">
        </div>
    </div>
    <!-- Kết thúc Phần Carousel -->

    <!-- Phần 2: Nhận Diện Biển Báo Giao Thông -->
    <div class="recognition-section">
        <h2 class="section-title">Nhận Diện Biển Báo Giao Thông</h2>
        <div class="video-container">
            <!-- Placeholder Image -->
            <img id="placeholderImage" src="hinh/1.jpg" alt="Ứng dụng Nhận Diện Biển Báo Giao Thông">
            <!-- Video Element -->
            <video id="video" autoplay playsinline aria-label="Video từ camera"></video>
            <div class="overlay"></div>
        </div>
        <img id="capturedImage" alt="Ảnh đã chụp">
        <canvas id="canvas" style="display: none;"></canvas>

        <div class="button-container">
            <button id="instructionButton" aria-label="Hướng Dẫn">Hướng Dẫn</button>
            <button id="captureButton" aria-label="Chụp ảnh">Bắt Đầu</button>
            <button id="uploadButton" aria-label="Tải ảnh lên">Tải Ảnh Lên</button>
            <button id="downloadButton" aria-label="Tải ảnh xuống">Tải Ảnh Xuống</button>
            <button id="readButton" aria-label="Đọc ý nghĩa biển báo">Đọc</button>
            <button id="retakeButton" aria-label="Chụp lại">Chụp Lại</button>
        </div>

        <!-- Hidden file input for uploading images -->
        <input type="file" id="uploadInput" accept="image/*" style="display: none;" />

        <div id="loadingModel">
            Đang tải mô hình...
            <div class="spinner"></div>
        </div>
        <div id="loadingPrediction" style="display: none;">
            Đang nhận diện...
            <div class="spinner"></div>
        </div>
        <div id="predictionResult" aria-live="polite"></div>
        <div id="signMeaning" aria-live="polite"></div>

        <!-- Nút "Làm Bài Kiểm Tra" -->
        <div id="quizButton-container">
            <button id="quizButton" aria-label="Làm bài kiểm tra" title="Làm bài kiểm tra giao thông">Làm Bài Kiểm Tra</button>
        </div>
    </div>

    <!-- Phần 4: Hỏi Đáp (QA) -->
    <div class="qa-section">
        <h2 class="section-title">Hỏi Đáp</h2>
        <div id="qa-container">
            <!-- Nội dung Hỏi Đáp sẽ được thêm vào đây bằng JavaScript -->
        </div>
    </div>

    <!-- Footer với nền xanh và chữ trắng -->
    <div class="footer">
        &copy; 2024 Ứng dụng AI nhận diện biển báo và tìm hiểu Luật giao thông đường bộ cho Học Sinh THCS
    </div>

    <!-- Modal Hướng Dẫn -->
    <div id="instructionModal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="instructionModalTitle" aria-describedby="instructionModalDescription">
        <div class="modal-content">
            <span class="close-button" aria-label="Đóng">&times;</span>
            <h2 id="instructionModalTitle">Hướng Dẫn Sử Dụng</h2>
            <div id="instructionModalDescription">
                <ol>
                    <li>Nhấn nút <strong>"Bắt Đầu"</strong> để khởi động camera.</li>
                    <li>Khi camera đã khởi động, nhấn nút <strong>"Chụp Ảnh"</strong> để bắt đầu quá trình chụp hình biển báo giao thông.</li>
                    <li>Đảm bảo camera của bạn được đặt sao cho biển báo rõ ràng và trung tâm trong khung hình.</li>
                    <li>Sau khi chụp, hệ thống sẽ tự động nhận diện biển báo và hiển thị kết quả.</li>
                    <li>Nhấn nút <strong>"Đọc"</strong> để nghe lại ý nghĩa của biển báo đã nhận diện.</li>
                    <li>Chọn nút <strong>"Làm Bài Kiểm Tra"</strong> để thực hiện bài kiểm tra giao thông.</li>
                </ol>
                <p>Số lượng biển báo có thể nhận diện: <strong id="totalSigns">0</strong></p>
            </div>
        </div>
    </div>

    <!-- TensorFlow.js -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>

    <script>
        // Các phần tử DOM
        // ... (giữ nguyên mã JavaScript hiện tại) ...
    </script>

</body>
</html>
